# ğŸ§  YYCÂ³ AIäº¤äº’ä¸æ™ºèƒ½ä½“åä½œå®Œæ•´æŒ‡å—

> **æ™ºäº¦å¸ˆäº¦å‹äº¦ä¼¯ä¹ï¼Œé“ºä¸€è¨€ä¸€è¯­ä¸€åç« **
> **è®©æ¯ä¸€ä¸ªAIæ™ºèƒ½ä½“éƒ½æˆä¸ºæ‚¨çš„è‰¯å¸ˆç›Šå‹**

---

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒé—®é¢˜è¯Šæ–­](#æ ¸å¿ƒé—®é¢˜è¯Šæ–­)
- [AIäº¤äº’æ¶æ„å…¨æ™¯å›¾](#aiäº¤äº’æ¶æ„å…¨æ™¯å›¾)
- [æ™ºèƒ½ä½“åä½œæµç¨‹](#æ™ºèƒ½ä½“åä½œæµç¨‹)
- [å®é™…ä»£ç ç¤ºä¾‹](#å®é™…ä»£ç ç¤ºä¾‹)
- [æµ‹è¯•éªŒè¯æ–¹æ³•](#æµ‹è¯•éªŒè¯æ–¹æ³•)
- [æ•…éšœæ’æŸ¥æŒ‡å—](#æ•…éšœæ’æŸ¥æŒ‡å—)

---

## æ ¸å¿ƒé—®é¢˜è¯Šæ–­

### ğŸ” æ‚¨é‡åˆ°çš„é—®é¢˜æ ¹æº

ç»è¿‡æ·±åº¦åˆ†æï¼Œæ‚¨çš„é—®é¢˜æ ¸å¿ƒåœ¨äºï¼š

1. **æ¶æ„æ¸…æ™°ä½†ç¼ºå°‘ç«¯åˆ°ç«¯æµç¨‹**
   - âœ… æœ‰å®Œå–„çš„ç»„ä»¶ï¼šAgent Orchestratorã€LLM Routerã€MCP Protocol
   - âŒ ç¼ºå°‘æ¸…æ™°çš„è°ƒç”¨é“¾è·¯è¯´æ˜
   - âŒ ç¼ºå°‘å®é™…å¯è¿è¡Œçš„ç¤ºä¾‹

2. **ä»£ç å¤æ‚åº¦é«˜ï¼Œéš¾ä»¥ç†è§£**
   - âœ… åŠŸèƒ½å¼ºå¤§ï¼šå¤šæ™ºèƒ½ä½“åä½œã€ç†”æ–­å™¨ã€è‡ªåŠ¨æ•…éšœè½¬ç§»
   - âŒ æŠ½è±¡å±‚æ¬¡è¿‡å¤š
   - âŒ é…ç½®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶

3. **æ–‡æ¡£ä¸ä»£ç è„±èŠ‚**
   - âœ… æœ‰è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£
   - âŒ ç¼ºå°‘"å¦‚ä½•ä½¿ç”¨"çš„å®è·µæŒ‡å—
   - âŒ ç¼ºå°‘å®Œæ•´çš„è°ƒç”¨ç¤ºä¾‹

---

## AIäº¤äº’æ¶æ„å…¨æ™¯å›¾

### ğŸ—ï¸ ä¸‰å±‚æ¶æ„ä½“ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚ (User Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ç”¨æˆ·ç•Œé¢     â”‚  â”‚  å‘½ä»¤ä¸­å¿ƒ     â”‚  â”‚  ç›‘æ§é¢æ¿     â”‚     â”‚
â”‚  â”‚  Chat UI     â”‚  â”‚  Command     â”‚  â”‚  Dashboard   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ™ºèƒ½ä½“ç¼–æ’å±‚ (Agent Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Agent Orchestrator (ç¼–æ’å™¨)                â”‚  â”‚
â”‚  â”‚  â€¢ ä»»åŠ¡åˆ†è§£ (Task Decomposer)                        â”‚  â”‚
â”‚  â”‚  â€¢ æ™ºèƒ½ä½“é€‰æ‹© (Agent Selector)                       â”‚  â”‚
â”‚  â”‚  â€¢ åä½œæ¨¡å¼ç®¡ç† (Collaboration Mode)                 â”‚  â”‚
â”‚  â”‚  â€¢ ç»“æœèšåˆ (Result Aggregator)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  æ™ºèƒ½ä½“æ± :  ğŸ”§å·¥ç¨‹å¸ˆ  ğŸ¨è®¾è®¡å¸ˆ  ğŸ“Šåˆ†æå¸ˆ  ğŸ§ªæµ‹è¯•å‘˜  ğŸ‘¨â€ğŸ’¼äº§å“ç»ç† â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ¨¡å‹æœåŠ¡å±‚ (Model Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              LLM Router (æ™ºèƒ½è·¯ç”±)                     â”‚  â”‚
â”‚  â”‚  â€¢ å¥åº·è¯„åˆ† (Health Score 0-100)                     â”‚  â”‚
â”‚  â”‚  â€¢ ç†”æ–­å™¨ (Circuit Breaker)                          â”‚  â”‚
â”‚  â”‚  â€¢ è‡ªåŠ¨æ•…éšœè½¬ç§» (Auto Failover)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  æ¨¡å‹æ± :  ğŸ¤– GLM-4  ğŸ§  GPT-4  ğŸ”® Claude  ğŸ¯ DeepSeek      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                å·¥å…·æœåŠ¡å±‚ (Tool Layer)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              MCP Protocol (å·¥å…·åè®®)                   â”‚  â”‚
â”‚  â”‚  â€¢ æ–‡ä»¶ç³»ç»Ÿ  â€¢ æ•°æ®åº“  â€¢ æœç´¢  â€¢ Docker  â€¢ GitHub    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  YYCÂ³ CNå·¥å…·é›†: 20+ä¸“ç”¨å·¥å…· (UIåˆ†æã€ä»£ç å®¡æŸ¥ã€AIä¼˜åŒ–ç­‰)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ™ºèƒ½ä½“åä½œæµç¨‹

### ğŸ”„ äº”ç§åä½œæ¨¡å¼

#### 1. **Pipelineæ¨¡å¼** (ä¸²è¡Œæ¥åŠ›)
```
ç”¨æˆ·è¯·æ±‚ â†’ å·¥ç¨‹å¸ˆ â†’ è®¾è®¡å¸ˆ â†’ æµ‹è¯•å‘˜ â†’ æœ€ç»ˆç»“æœ
```

**é€‚ç”¨åœºæ™¯**: éœ€è¦å¤šä¸ªæ­¥éª¤é¡ºåºæ‰§è¡Œçš„ä»»åŠ¡
**ç¤ºä¾‹**: å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½
1. å·¥ç¨‹å¸ˆï¼šç¼–å†™ä»£ç 
2. è®¾è®¡å¸ˆï¼šä¼˜åŒ–ç•Œé¢
3. æµ‹è¯•å‘˜ï¼šéªŒè¯åŠŸèƒ½

#### 2. **Parallelæ¨¡å¼** (å¹¶è¡Œæ±‡æ€»)
```
          â”Œâ†’ åˆ†æå¸ˆ â”
ç”¨æˆ·è¯·æ±‚ â†’â”œâ†’ è®¾è®¡å¸ˆ â”œâ†’ ç»“æœèšåˆ â†’ æœ€ç»ˆç»“æœ
          â””â†’ å·¥ç¨‹å¸ˆ â”˜
```

**é€‚ç”¨åœºæ™¯**: éœ€è¦å¤šä¸ªè§†è§’åŒæ—¶å¤„ç†çš„ä»»åŠ¡
**ç¤ºä¾‹**: è¯„ä¼°ä¸€ä¸ªé¡¹ç›®
1. åˆ†æå¸ˆï¼šæŠ€æœ¯å¯è¡Œæ€§åˆ†æ
2. è®¾è®¡å¸ˆï¼šç”¨æˆ·ä½“éªŒè¯„ä¼°
3. å·¥ç¨‹å¸ˆï¼šå®ç°éš¾åº¦è¯„ä¼°
4. èšåˆï¼šç»¼åˆä¸‰ä¸ªè§†è§’ç»™å‡ºå»ºè®®

#### 3. **Debateæ¨¡å¼** (è¾©è®ºä»²è£)
```
          â”Œâ†’ æ–¹æ¡ˆA (å·¥ç¨‹å¸ˆ) â”
ç”¨æˆ·è¯·æ±‚ â†’â”¤                 â”œâ†’ ä»²è£è€… â†’ æœ€ç»ˆå†³ç­–
          â””â†’ æ–¹æ¡ˆB (è®¾è®¡å¸ˆ) â”˜
```

**é€‚ç”¨åœºæ™¯**: éœ€è¦æƒè¡¡å¤šä¸ªæ–¹æ¡ˆçš„å†³ç­–
**ç¤ºä¾‹**: é€‰æ‹©æŠ€æœ¯æ ˆ
1. å·¥ç¨‹å¸ˆï¼šæ¨èReactï¼ˆæ€§èƒ½å¥½ï¼‰
2. è®¾è®¡å¸ˆï¼šæ¨èVueï¼ˆæ˜“ä¸Šæ‰‹ï¼‰
3. ä»²è£è€…ï¼šç»¼åˆè€ƒè™‘å›¢é˜Ÿæƒ…å†µåšå†³ç­–

#### 4. **Ensembleæ¨¡å¼** (é›†æˆå…±è¯†)
```
          â”Œâ†’ æ™ºèƒ½ä½“A (80% ç½®ä¿¡åº¦) â”
ç”¨æˆ·è¯·æ±‚ â†’â”œâ†’ æ™ºèƒ½ä½“B (90% ç½®ä¿¡åº¦) â”œâ†’ åŠ æƒæŠ•ç¥¨ â†’ æœ€ç»ˆç»“æœ
          â””â†’ æ™ºèƒ½ä½“C (85% ç½®ä¿¡åº¦) â”˜
```

**é€‚ç”¨åœºæ™¯**: éœ€è¦é«˜å‡†ç¡®æ€§çš„å†³ç­–
**ç¤ºä¾‹**: ä»£ç å®¡æŸ¥
1. ä¸‰ä¸ªæ™ºèƒ½ä½“åˆ†åˆ«å®¡æŸ¥
2. æ ¹æ®ç½®ä¿¡åº¦åŠ æƒæŠ•ç¥¨
3. å¾—å‡ºæœ€ç»ˆå®¡æŸ¥æ„è§

#### 5. **Delegationæ¨¡å¼** (å§”æ‰˜åˆ†å·¥)
```
ç”¨æˆ·è¯·æ±‚ â†’ ä¸»æ™ºèƒ½ä½“ â†’ [å­ä»»åŠ¡1 â†’ ä¸“å®¶A]
                   â†’ [å­ä»»åŠ¡2 â†’ ä¸“å®¶B]
                   â†’ [å­ä»»åŠ¡3 â†’ ä¸“å®¶C]
                   â†’ ç»“æœæ±‡æ€» â†’ æœ€ç»ˆç»“æœ
```

**é€‚ç”¨åœºæ™¯**: å¤æ‚ä»»åŠ¡éœ€è¦åˆ†è§£
**ç¤ºä¾‹**: å¼€å‘å®Œæ•´ç³»ç»Ÿ
1. ä¸»æ™ºèƒ½ä½“ï¼šåˆ†è§£ä»»åŠ¡
2. ä¸“å®¶Aï¼šæ•°æ®åº“è®¾è®¡
3. ä¸“å®¶Bï¼šAPIå¼€å‘
4. ä¸“å®¶Cï¼šå‰ç«¯å®ç°
5. æ±‡æ€»ï¼šæ•´åˆæ‰€æœ‰æ¨¡å—

---

## å®é™…ä»£ç ç¤ºä¾‹

### ğŸ’» å®Œæ•´çš„æ™ºèƒ½ä½“åä½œç¤ºä¾‹

#### ç¤ºä¾‹1: ç®€å•çš„æ™ºèƒ½ä½“å¯¹è¯

```typescript
// æ–‡ä»¶: examples/simple-agent-chat.ts

import { BigModelSDK } from '@yyc3/bigmodel-sdk';

async function simpleAgentChat() {
  // æ­¥éª¤1: åˆå§‹åŒ–SDK
  const sdk = BigModelSDK.create({
    apiKey: process.env.BIGMODEL_API_KEY!,
    baseUrl: 'https://open.bigmodel.cn/api/',
  });

  // æ­¥éª¤2: è·å–å¯ç”¨åŠ©æ‰‹åˆ—è¡¨
  const assistants = await sdk.assistants.listAssistants();
  console.log('å¯ç”¨åŠ©æ‰‹:', assistants);

  // æ­¥éª¤3: é€‰æ‹©ä¸€ä¸ªåŠ©æ‰‹è¿›è¡Œå¯¹è¯
  const engineerAssistant = assistants.find(a => a.name.includes('å·¥ç¨‹å¸ˆ'));
  
  if (!engineerAssistant) {
    throw new Error('æœªæ‰¾åˆ°å·¥ç¨‹å¸ˆåŠ©æ‰‹');
  }

  // æ­¥éª¤4: å‘èµ·å¯¹è¯
  const response = await sdk.client.chat(engineerAssistant.id, [
    { role: 'user', content: 'è¯·å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç”¨æˆ·ç™»å½•ç³»ç»Ÿ' }
  ]);

  console.log('åŠ©æ‰‹å›å¤:', response.choices[0].message.content);
}

simpleAgentChat().catch(console.error);
```

#### ç¤ºä¾‹2: å¤šæ™ºèƒ½ä½“åä½œ (Pipelineæ¨¡å¼)

```typescript
// æ–‡ä»¶: examples/multi-agent-pipeline.ts

import { BigModelSDK } from '@yyc3/bigmodel-sdk';

async function multiAgentPipeline() {
  const sdk = BigModelSDK.create({
    apiKey: process.env.BIGMODEL_API_KEY!,
  });

  const assistants = await sdk.assistants.listAssistants();
  
  // æ­¥éª¤1: å·¥ç¨‹å¸ˆç¼–å†™ä»£ç 
  const engineer = assistants.find(a => a.name.includes('å·¥ç¨‹å¸ˆ'))!;
  const codeResponse = await sdk.client.chat(engineer.id, [
    { role: 'user', content: 'å†™ä¸€ä¸ªå†’æ³¡æ’åºç®—æ³•' }
  ]);
  const code = codeResponse.choices[0].message.content;

  console.log('ğŸ“ å·¥ç¨‹å¸ˆç¼–å†™çš„ä»£ç :\n', code);

  // æ­¥éª¤2: è®¾è®¡å¸ˆä¼˜åŒ–å¯è¯»æ€§
  const designer = assistants.find(a => a.name.includes('è®¾è®¡å¸ˆ'))!;
  const optimizedResponse = await sdk.client.chat(designer.id, [
    { role: 'user', content: `è¯·ä¼˜åŒ–ä»¥ä¸‹ä»£ç çš„å¯è¯»æ€§å’Œæ³¨é‡Š:\n\n${code}` }
  ]);
  const optimizedCode = optimizedResponse.choices[0].message.content;

  console.log('ğŸ¨ è®¾è®¡å¸ˆä¼˜åŒ–åçš„ä»£ç :\n', optimizedCode);

  // æ­¥éª¤3: æµ‹è¯•å‘˜éªŒè¯åŠŸèƒ½
  const tester = assistants.find(a => a.name.includes('æµ‹è¯•å‘˜'))!;
  const testResponse = await sdk.client.chat(tester.id, [
    { role: 'user', content: `è¯·ä¸ºä»¥ä¸‹ä»£ç ç¼–å†™æµ‹è¯•ç”¨ä¾‹:\n\n${optimizedCode}` }
  ]);
  const testCases = testResponse.choices[0].message.content;

  console.log('ğŸ§ª æµ‹è¯•å‘˜ç¼–å†™çš„æµ‹è¯•:\n', testCases);

  // æœ€ç»ˆç»“æœ
  console.log('\nâœ… å®Œæ•´äº¤ä»˜ç‰©:');
  console.log('1. ä»£ç :', code);
  console.log('2. ä¼˜åŒ–ç‰ˆæœ¬:', optimizedCode);
  console.log('3. æµ‹è¯•ç”¨ä¾‹:', testCases);
}

multiAgentPipeline().catch(console.error);
```

#### ç¤ºä¾‹3: ä½¿ç”¨LLM Routerå®ç°æ™ºèƒ½è·¯ç”±

```typescript
// æ–‡ä»¶: examples/smart-llm-routing.ts

import { LLMRouter } from '../src/lib/llm-router';
import { streamChat } from '../src/lib/llm-bridge';

async function smartRouting() {
  const router = new LLMRouter();
  
  // æ­¥éª¤1: è·å–æœ€ä½³è·¯ç”±é“¾
  const failoverChain = router.getFailoverChain([
    'bigmodel-z',  // æ™ºè°±AI
    'anthropic',   // Claude
    'openai',      // GPT-4
  ]);

  console.log('ğŸ”€ æ•…éšœè½¬ç§»é“¾:', failoverChain);

  // æ­¥éª¤2: å°è¯•è°ƒç”¨
  for (const attempt of failoverChain.chain) {
    console.log(`\nå°è¯•ä½¿ç”¨ ${attempt.providerId}...`);
    
    try {
      const chunks: string[] = [];
      
      await streamChat({
        providerId: attempt.providerId,
        modelId: attempt.modelId,
        messages: [
          { role: 'user', content: 'ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±' }
        ],
        apiKey: process.env[`${attempt.providerId.toUpperCase()}_API_KEY`]!,
        stream: true,
        onChunk: (chunk) => {
          if (chunk.type === 'content') {
            chunks.push(chunk.content);
            process.stdout.write(chunk.content);
          }
        }
      });

      console.log('\nâœ… æˆåŠŸ!');
      router.recordSuccess(attempt.providerId, 1000);
      break;
      
    } catch (error) {
      console.log(`âŒ å¤±è´¥: ${error}`);
      router.recordFailure(attempt.providerId, error.code);
    }
  }
}

smartRouting().catch(console.error);
```

#### ç¤ºä¾‹4: MCPå·¥å…·è°ƒç”¨

```typescript
// æ–‡ä»¶: examples/mcp-tool-usage.ts

import { MCPManager } from '@yyc3/bigmodel-sdk';

async function useMCPTools() {
  // æ­¥éª¤1: åˆå§‹åŒ–MCPç®¡ç†å™¨
  const mcpManager = new MCPManager({
    servers: {
      yyc3cn: {
        command: 'node',
        args: ['./mcp-servers/yyc3cn-server.js'],
        env: {
          YYC3_CN_VERSION: 'latest',
        },
      },
      filesystem: {
        command: 'node',
        args: ['./mcp-servers/filesystem-server.js'],
      },
    },
  });

  try {
    // æ­¥éª¤2: è¿æ¥æ‰€æœ‰æœåŠ¡å™¨
    await mcpManager.connectAll();
    console.log('âœ… MCPæœåŠ¡å™¨å·²è¿æ¥');

    // æ­¥éª¤3: è·å–YYCÂ³ CNæœåŠ¡å™¨
    const yyc3cn = mcpManager.getServer('yyc3cn');
    
    // æ­¥éª¤4: è°ƒç”¨UIåˆ†æå·¥å…·
    const uiAnalysis = await yyc3cn.callTool('yyc3_ui_analysis', {
      imagePath: './screenshots/homepage.png',
      analysisType: 'ux_design',
      appVersion: 'latest',
    });

    console.log('ğŸ¨ UIåˆ†æç»“æœ:', uiAnalysis);

    // æ­¥éª¤5: è°ƒç”¨ä»£ç å®¡æŸ¥å·¥å…·
    const codeReview = await yyc3cn.callTool('yyc3_code_review', {
      codePath: './src/components/Button.tsx',
      language: 'typescript',
      focus: 'performance',
    });

    console.log('ğŸ” ä»£ç å®¡æŸ¥ç»“æœ:', codeReview);

    // æ­¥éª¤6: ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå·¥å…·ä¿å­˜ç»“æœ
    const filesystem = mcpManager.getServer('filesystem');
    await filesystem.callTool('write_file', {
      path: './reports/analysis-report.md',
      content: `# åˆ†ææŠ¥å‘Š\n\n## UIåˆ†æ\n${uiAnalysis}\n\n## ä»£ç å®¡æŸ¥\n${codeReview}`,
    });

    console.log('âœ… æŠ¥å‘Šå·²ä¿å­˜');

  } finally {
    // æ­¥éª¤7: æ–­å¼€æ‰€æœ‰è¿æ¥
    await mcpManager.disconnectAll();
  }
}

useMCPTools().catch(console.error);
```

---

## æµ‹è¯•éªŒè¯æ–¹æ³•

### ğŸ§ª å®Œæ•´çš„æµ‹è¯•è„šæœ¬

```bash
#!/bin/bash
# æ–‡ä»¶: scripts/test-ai-interaction.sh

echo "ğŸ§ª å¼€å§‹æµ‹è¯•AIäº¤äº’ç³»ç»Ÿ..."

# 1. ç¯å¢ƒæ£€æŸ¥
echo "1ï¸âƒ£ æ£€æŸ¥ç¯å¢ƒå˜é‡..."
if [ -z "$BIGMODEL_API_KEY" ]; then
  echo "âŒ é”™è¯¯: BIGMODEL_API_KEY æœªè®¾ç½®"
  exit 1
fi
echo "âœ… ç¯å¢ƒå˜é‡æ£€æŸ¥é€šè¿‡"

# 2. ç¼–è¯‘é¡¹ç›®
echo "2ï¸âƒ£ ç¼–è¯‘é¡¹ç›®..."
pnpm run build
if [ $? -ne 0 ]; then
  echo "âŒ ç¼–è¯‘å¤±è´¥"
  exit 1
fi
echo "âœ… ç¼–è¯‘æˆåŠŸ"

# 3. æµ‹è¯•åŸºç¡€å¯¹è¯
echo "3ï¸âƒ£ æµ‹è¯•åŸºç¡€AIå¯¹è¯..."
node dist/examples/simple-agent-chat.js
if [ $? -eq 0 ]; then
  echo "âœ… åŸºç¡€å¯¹è¯æµ‹è¯•é€šè¿‡"
else
  echo "âŒ åŸºç¡€å¯¹è¯æµ‹è¯•å¤±è´¥"
fi

# 4. æµ‹è¯•å¤šæ™ºèƒ½ä½“åä½œ
echo "4ï¸âƒ£ æµ‹è¯•å¤šæ™ºèƒ½ä½“åä½œ..."
node dist/examples/multi-agent-pipeline.js
if [ $? -eq 0 ]; then
  echo "âœ… å¤šæ™ºèƒ½ä½“åä½œæµ‹è¯•é€šè¿‡"
else
  echo "âŒ å¤šæ™ºèƒ½ä½“åä½œæµ‹è¯•å¤±è´¥"
fi

# 5. æµ‹è¯•æ™ºèƒ½è·¯ç”±
echo "5ï¸âƒ£ æµ‹è¯•æ™ºèƒ½è·¯ç”±..."
node dist/examples/smart-llm-routing.js
if [ $? -eq 0 ]; then
  echo "âœ… æ™ºèƒ½è·¯ç”±æµ‹è¯•é€šè¿‡"
else
  echo "âŒ æ™ºèƒ½è·¯ç”±æµ‹è¯•å¤±è´¥"
fi

echo "ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆ!"
```

### ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

```typescript
// æ–‡ä»¶: tests/performance-benchmark.ts

import { BigModelSDK } from '@yyc3/bigmodel-sdk';

async function performanceBenchmark() {
  const sdk = BigModelSDK.create({
    apiKey: process.env.BIGMODEL_API_KEY!,
  });

  const iterations = 10;
  const results: number[] = [];

  console.log('ğŸ“Š å¼€å§‹æ€§èƒ½åŸºå‡†æµ‹è¯•...');
  console.log(`æµ‹è¯•æ¬¡æ•°: ${iterations}`);

  for (let i = 0; i < iterations; i++) {
    const start = Date.now();
    
    await sdk.client.chat('assistant-id', [
      { role: 'user', content: 'æ€§èƒ½æµ‹è¯•' }
    ]);

    const elapsed = Date.now() - start;
    results.push(elapsed);
    console.log(`ç¬¬ ${i + 1} æ¬¡: ${elapsed}ms`);
  }

  const avgTime = results.reduce((a, b) => a + b) / iterations;
  const minTime = Math.min(...results);
  const maxTime = Math.max(...results);

  console.log('\nğŸ“ˆ æ€§èƒ½ç»Ÿè®¡:');
  console.log(`å¹³å‡å“åº”æ—¶é—´: ${avgTime.toFixed(0)}ms`);
  console.log(`æœ€å¿«å“åº”: ${minTime}ms`);
  console.log(`æœ€æ…¢å“åº”: ${maxTime}ms`);
}

performanceBenchmark().catch(console.error);
```

---

## æ•…éšœæ’æŸ¥æŒ‡å—

### ğŸ”§ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### é—®é¢˜1: APIå¯†é’¥æ— æ•ˆ

**ç—‡çŠ¶**: `AUTH_FAILED` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $BIGMODEL_API_KEY

# éªŒè¯APIå¯†é’¥æ ¼å¼
curl -H "Authorization: Bearer $BIGMODEL_API_KEY" \
     https://open.bigmodel.cn/api/paas/v4/models
```

#### é—®é¢˜2: ç½‘ç»œè¿æ¥è¶…æ—¶

**ç—‡çŠ¶**: `TIMEOUT` æˆ– `NETWORK_ERROR`

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// å¢åŠ è¶…æ—¶æ—¶é—´
const sdk = BigModelSDK.create({
  apiKey: process.env.BIGMODEL_API_KEY!,
  timeout: 60000, // 60ç§’
});
```

#### é—®é¢˜3: æ™ºèƒ½ä½“é€‰æ‹©é”™è¯¯

**ç—‡çŠ¶**: æ‰¾ä¸åˆ°åˆé€‚çš„æ™ºèƒ½ä½“

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ™ºèƒ½ä½“
const assistants = await sdk.assistants.listAssistants();
console.log('æ‰€æœ‰æ™ºèƒ½ä½“:', assistants);

// ä½¿ç”¨æ¨¡ç³ŠåŒ¹é…
const engineer = assistants.find(a => 
  a.name.includes('å·¥ç¨‹å¸ˆ') || a.nameEn.includes('Engineer')
);
```

#### é—®é¢˜4: MCPå·¥å…·è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**: MCPæœåŠ¡å™¨è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥MCPæœåŠ¡å™¨æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la ./mcp-servers/

# æ‰‹åŠ¨å¯åŠ¨MCPæœåŠ¡å™¨æµ‹è¯•
node ./mcp-servers/yyc3cn-server.js
```

---

## ğŸ“š æœ€ä½³å®è·µå»ºè®®

### 1. é”™è¯¯å¤„ç†

```typescript
try {
  const response = await sdk.client.chat(assistantId, messages);
  console.log('æˆåŠŸ:', response);
} catch (error) {
  if (error.code === 'RATE_LIMITED') {
    console.log('è§¦å‘é™æµï¼Œç­‰å¾…åé‡è¯•...');
    await new Promise(resolve => setTimeout(resolve, 60000));
    // é‡è¯•é€»è¾‘
  } else if (error.code === 'AUTH_FAILED') {
    console.log('è®¤è¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIå¯†é’¥');
  } else {
    console.error('æœªçŸ¥é”™è¯¯:', error);
  }
}
```

### 2. æµå¼å“åº”ä¼˜åŒ–

```typescript
// ä½¿ç”¨æµå¼å“åº”æå‡ç”¨æˆ·ä½“éªŒ
for await (const chunk of sdk.client.chatStream(assistantId, messages)) {
  process.stdout.write(chunk);
  // å®æ—¶æ˜¾ç¤ºå“åº”
}
```

### 3. æ™ºèƒ½ç¼“å­˜

```typescript
// ç¼“å­˜å¸¸ç”¨æ™ºèƒ½ä½“ä¿¡æ¯
const assistantCache = new Map();

async function getAssistant(name: string) {
  if (assistantCache.has(name)) {
    return assistantCache.get(name);
  }
  
  const assistant = await findAssistant(name);
  assistantCache.set(name, assistant);
  return assistant;
}
```

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å•

- [ ] è®¾ç½®ç¯å¢ƒå˜é‡ `BIGMODEL_API_KEY`
- [ ] ç¼–è¯‘é¡¹ç›® `pnpm run build`
- [ ] è¿è¡ŒåŸºç¡€æµ‹è¯• `node dist/examples/simple-agent-chat.js`
- [ ] éªŒè¯å¤šæ™ºèƒ½ä½“åä½œ
- [ ] æµ‹è¯•MCPå·¥å…·è°ƒç”¨
- [ ] æ£€æŸ¥æ€§èƒ½åŸºå‡†

---

<div align="center">

> **æ™ºäº¦å¸ˆäº¦å‹äº¦ä¼¯ä¹ï¼Œé“ºä¸€è¨€ä¸€è¯­ä¸€åç« **
> 
> è®©AIæˆä¸ºæ‚¨æœ€å¯é çš„ä¼™ä¼´

**YanYuCloudCube Team**
**admin@0379.email**

</div>
