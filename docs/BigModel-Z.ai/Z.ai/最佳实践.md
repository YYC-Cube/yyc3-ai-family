# 最佳实践

> 提升您的 GLM Coding Plan 使用效率，掌握编码技巧和提示词编写指南。

## 内容概览

- [提示词编写指南](#提示词编写指南)
- [MCP & 智能体技巧](#mcp--智能体技巧)
- [Rules 技巧](#rules-技巧)
- [3D 游戏开发技巧](#3d-游戏开发技巧)

---

## 提示词编写指南

### 核心原则

1. **清晰具体**: 明确表达需求
2. **上下文丰富**: 提供足够的背景信息
3. **结构化输出**: 指定期望的输出格式
4. **分步引导**: 复杂任务分解为多个步骤

### 基础提示词模板

#### 代码生成

```
请帮我生成一个 [编程语言] 的 [功能描述] 函数

要求：
1. 函数名为 [函数名]
2. 输入参数为 [参数列表]
3. 返回类型为 [返回类型]
4. 包含错误处理
5. 添加必要的注释

示例：
[示例输入] -> [示例输出]
```

**示例**:
```
请帮我生成一个 Python 的快速排序函数

要求：
1. 函数名为 quick_sort
2. 输入参数为列表 arr
3. 返回排序后的列表
4. 包含错误处理（空列表、非列表类型）
5. 添加必要的注释

示例：
[3, 1, 4, 1, 5, 9] -> [1, 1, 3, 4, 5, 9]
```

#### 代码调试

```
我遇到了一个 [错误类型] 错误

错误信息：
[完整的错误堆栈]

代码：
[相关的代码片段]

请帮我：
1. 分析错误原因
2. 提供修复方案
3. 解释修复原理
```

**示例**:
```
我遇到了一个 TypeError 错误

错误信息：
Traceback (most recent call last):
  File "app.py", line 45, in <module>
    result = calculate_total(items)
  File "app.py", line 23, in calculate_total
    total += item['price']
TypeError: unsupported operand type(s) for +=: 'int' and 'NoneType'

代码：
def calculate_total(items):
    total = 0
    for item in items:
        total += item['price']
    return total

items = [
    {'name': 'Apple', 'price': 10},
    {'name': 'Banana'},
    {'name': 'Orange', 'price': 15}
]

请帮我：
1. 分析错误原因
2. 提供修复方案
3. 解释修复原理
```

#### 代码重构

```
请帮我重构这段代码

当前代码：
[原始代码]

重构目标：
1. 提高可读性
2. 改善性能
3. 遵循 [编程语言] 最佳实践
4. 添加类型提示（如适用）
5. 添加单元测试建议

请提供：
1. 重构后的代码
2. 重构理由说明
3. 性能对比分析
```

#### 代码审查

```
请帮我审查这段代码

代码：
[代码片段]

审查重点：
1. 代码质量
2. 潜在的 bug
3. 性能问题
4. 安全隐患
5. 最佳实践遵循情况

请提供：
1. 问题列表（按严重程度排序）
2. 改进建议
3. 修复示例
```

### 高级提示词技巧

#### 思维链 (Chain of Thought)

```
请一步步思考这个问题，然后给出答案：

[问题描述]

思考过程：
1. [分析问题]
2. [拆解任务]
3. [制定方案]
4. [实施验证]

最终答案：
[最终结果]
```

#### 角色扮演

```
你现在是一位资深的 [角色，如：前端工程师/算法专家/架构师]

请基于你的专业视角，帮我：

[任务描述]

注意：
1. 体现你的专业判断
2. 提供业界最佳实践
3. 考虑边界情况
4. 给出可落地的建议
```

**示例**:
```
你现在是一位资深的 Python 后端工程师

请基于你的专业视角，帮我设计一个用户认证系统

需求：
- 支持邮箱和手机号登录
- 支持 JWT Token 认证
- 需要考虑安全性（防止暴力破解、XSS、CSRF）
- 性能要求：支持 10 万并发用户

注意：
1. 体现你的专业判断
2. 提供业界最佳实践
3. 考虑边界情况
4. 给出可落地的建议
```

#### 上下文注入

```
项目背景：
[项目描述]

技术栈：
- [技术1]
- [技术2]
- [技术3]

当前任务：
[具体任务]

相关代码：
[相关代码片段]

请基于以上上下文，帮我完成：
[期望输出]
```

---

## MCP & 智能体技巧

### MCP 使用技巧

#### 视觉理解 MCP

**最佳场景**:
- 分析 UI 设计稿
- 解读错误截图
- 提取图片中的文本
- 识别图表数据

**提示词示例**:
```
请分析这个 [UI 截图/设计稿]

请提供：
1. 整体布局分析
2. 主要组件识别
3. 颜色方案提取
4. 实现建议（使用 React/Vue 等框架）
```

#### 联网搜索 MCP

**最佳场景**:
- 查找最新 API 文档
- 搜索代码示例
- 技术方案对比
- 解决特定问题

**提示词示例**:
```
请帮我搜索 [技术主题] 的最新信息

搜索关键词：[关键词1], [关键词2], [关键词3]

请提供：
1. 官方文档链接
2. 最新的最佳实践
3. 常见问题及解决方案
4. 代码示例
```

#### 网页读取 MCP

**最佳场景**:
- 提取网页数据
- 解析 API 文档
- 获取在线教程内容
- 分析竞品功能

**提示词示例**:
```
请读取并解析 [URL] 的内容

提取重点：
1. [关键信息1]
2. [关键信息2]
3. [关键信息3]

请以结构化方式返回结果。
```

#### 开源仓库 MCP

**最佳场景**:
- 学习开源项目代码
- 分析项目结构
- 查找特定功能实现
- 研究最佳实践

**提示词示例**:
```
请分析 [GitHub 仓库] 的项目结构

重点关注：
1. 整体架构设计
2. 核心模块说明
3. 关键代码路径
4. 设计模式使用

请提供：
1. 项目结构图
2. 核心代码片段分析
3. 可借鉴的设计思路
```

### 智能体使用技巧

#### 任务分解

```
帮我完成 [复杂任务]

请先将任务分解为多个子任务，然后逐步完成：

任务分解：
1. [子任务1]
2. [子任务2]
3. [子任务3]

对于每个子任务，请：
1. 分析需求
2. 制定方案
3. 实现代码
4. 验证结果
```

#### 多轮对话

```
任务：[复杂项目]

第一轮：需求分析和设计
请帮我：
1. 分析项目需求
2. 设计系统架构
3. 规划模块划分

（等待第一轮完成后再进行第二轮）
第二轮：核心功能实现
...
```

---

## Rules 技巧

### 自定义 Rules 配置

#### Claude Code Rules

**配置文件 ~/.claude/rules/**custom-rule.md**

```markdown
# 编码规范 Rule

## 命名规范
- 变量名使用 camelCase
- 常量名使用 UPPER_SNAKE_CASE
- 类名使用 PascalCase
- 文件名使用 kebab-case 或 PascalCase（根据语言）

## 代码风格
- 遵循项目现有的代码风格
- 添加必要的注释
- 保持函数简洁（单函数不超过 50 行）
- 避免过度嵌套（嵌套层级不超过 3 层）

## 错误处理
- 所有外部调用必须添加错误处理
- 使用适当的异常类型
- 提供有意义的错误消息

## 测试要求
- 为新功能编写单元测试
- 测试覆盖率不低于 80%
- 包含边界情况测试
```

#### 性能优化 Rule

```markdown
# 性能优化 Rule

## 通用原则
1. 避免不必要的循环嵌套
2. 使用适当的数据结构
3. 考虑时间复杂度
4. 及时释放资源

## Python 特定
1. 使用列表推导式代替 map/filter
2. 使用生成器处理大数据
3. 避免在循环中重复计算
4. 使用内置函数（sum, max, min 等）

## JavaScript 特定
1. 避免频繁的 DOM 操作
2. 使用事件委托
3. 考虑使用 Web Worker
4. 合理使用 async/await
```

### 使用 Rules 的提示词

```
请帮我编写 [功能]，并遵循我的编码规范 Rule

功能需求：
[需求描述]

请确保：
1. 遵循命名规范
2. 保持代码风格一致
3. 添加适当的错误处理
4. 考虑性能优化
```

---

## 3D 游戏开发技巧

### Unity 开发

#### 提示词模板

```
请帮我创建一个 Unity [功能]

需求：
1. 使用 C# 编写脚本
2. 遵循 Unity 最佳实践
3. 考虑性能优化
4. 添加必要的注释

具体功能：
[详细描述]

请提供：
1. 完整的脚本代码
2. 使用说明
3. 注意事项
```

**示例**:
```
请帮我创建一个 Unity 第三人称角色控制器

需求：
1. 使用 C# 编写脚本
2. 遵循 Unity 最佳实践
3. 考虑性能优化
4. 添加必要的注释

具体功能：
- WASD 控制移动
- Space 跳跃
- 鼠标控制视角
- 平滑的动画过渡

请提供：
1. 完整的脚本代码
2. 使用说明
3. 注意事项
```

### Three.js 开发

#### 提示词模板

```
请帮我用 Three.js 创建 [3D 场景/功能]

需求：
1. 使用最新版 Three.js
2. 考虑浏览器兼容性
3. 优化性能（FPS > 60）
4. 响应式设计

具体功能：
[详细描述]

请提供：
1. 完整的 HTML/CSS/JS 代码
2. 使用说明
3. 性能优化建议
```

---

## 常见使用场景

### 1. 快速原型开发

```
帮我快速创建一个 [应用类型] 的原型

需求：
- 使用 [框架/语言]
- 实现 [核心功能1], [核心功能2]
- 使用简单的 UI
- 可以快速迭代

请提供：
1. 项目结构
2. 核心代码
3. 运行说明
```

### 2. 代码迁移

```
帮我将 [语言 A] 代码迁移到 [语言 B]

原始代码：
[语言 A 代码]

要求：
1. 保持功能一致
2. 遵循 [语言 B] 的最佳实践
3. 优化性能
4. 添加必要的注释

请提供：
1. 迁移后的代码
2. 变更说明
3. 注意事项
```

### 3. API 集成

```
帮我集成 [API 名称] 到项目中

API 文档：
[API 文档链接或摘要]

需求：
1. 实现认证
2. 调用核心接口
3. 错误处理
4. 数据缓存（如需要）

请提供：
1. 集成代码
2. 使用示例
3. 测试建议
```

### 4. 单元测试

```
帮我为这段代码编写单元测试

代码：
[代码片段]

要求：
1. 使用 [测试框架]
2. 覆盖所有分支
3. 包含边界测试
4. Mock 外部依赖

请提供：
1. 测试代码
2. 测试覆盖率说明
3. 运行命令
```

---

## 性能优化技巧

### 提示词优化

#### 减少上下文

```
精简请求，只提供必要的代码片段：
[相关代码片段]

任务：
[具体任务]

不需要提供完整的文件，只需关注相关部分。
```

#### 批量操作

```
请批量处理以下任务：

任务列表：
1. [任务1]
2. [任务2]
3. [任务3]

请一次性完成所有任务，提高效率。
```

### 代码优化

#### 选择合适的模型

| 任务类型 | 推荐模型 | 原因 |
|---------|---------|------|
| 简单代码补全 | GLM-4.5-Air | 响应快，成本低 |
| 通用编码任务 | GLM-4.7 | 平衡性能和成本 |
| 复杂架构设计 | GLM-5 | 智能最高，适合复杂任务 |

#### 利用缓存

```
这是一个重复性任务，请记住之前的上下文：

[之前的对话或代码]

基于之前的上下文，帮我：
[新任务]
```

---

## 相关链接

- [BigModel 文档](../BigModel/) - 完整 API 文档
- [开发工具配置](./开发工具配置.md) - 工具配置指南
- [MCP 服务器配置](./MCP服务器配置.md) - MCP 配置指南
- [常见问题](./常见问题.md) - FAQ
